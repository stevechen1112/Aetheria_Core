# Aetheria Core：技術白皮書 (草案)

**代號：** Aetheria（"天界之氣" / "靈魂精華"）  
**版本：** 0.1.0  
**日期：** 2026年1月23日  
**目標架構：** 多租戶、代理式 AI (Agentic AI)、命理驅動決策支援系統

---

## 1. 執行摘要 (Executive Summary)
Aetheria 不僅是一款命理應用程式，它代表了 **「超個人化人生作業系統 (Hyper-Personalized Life Operating Systems, LifeOS)」** 的典範轉移。透過融合確定性的命理演算法（占星、八字等）與機率性的生成式 AI (LLMs)，Aetheria 為用戶提供了一位具備「深度畫像感知」的 AI 伴侶。該系統能根據用戶意圖的語境，動態切換角色——從理性的財富教練到靈性的同理朋友——同時透過零信任、多租戶架構嚴格保障用戶隱私，為未來擴展至 B2B/HR-Tech 領域奠定基礎。

## 2. 產品架構總覽 (Product Architecture Overview)

### 2.1 "Soul-Code" 引擎 (資料層)
Aetheria 將命運的 *計算* 與建議的 *解讀* 分離。我們採用「3+1」混合架構，涵蓋東西方核心命理與互動觸發器。

-   **通用命理格式 (Universal Metaphysics Format, UMF)：** 一個抽象層，將分歧的命理輸入歸一化為統一的心理特徵向量。
-   **計算子系統 (Tech Stack)：**
    *   **Core 1: 西洋占星 (Western Astrology):** 使用 **Swiss Ephemeris (pyswisseph/Rust wrapper)** 計算高精度行星相位與宮位。負責心理原型與潛意識畫像。
    *   **Core 2: 八字 (BaZi):** 使用 **sxtwl (C++/Python)** 處理真太陽時與二十四節氣，精確判定月柱交接。負責五行能量平衡與流年運勢。
    *   **Core 3: 紫微斗數 (Ziwei Doushu):** 移植 **iztro** (TypeScript) 邏輯至 Rust，實現高效排盤。負責社會行為分析與十二宮位事件映射。
    *   **Interaction: 塔羅 (Tarot):** 基於 **RNG (Random Number Generator)** 與共時性演算法。負責每日心情快照與對話破冰。

### 2.2 "Shape-Shifter" AI (邏輯層)
由代理編排器 (Agentic Orchestrator，如 LangGraph/AutoGen) 驅動，將用戶查詢路由至專門的子代理。
-   **動態角色切換：**
    -   *財富模組：* 觸發「理性教練」提示詞（數據驅動、風險意識、客觀）。
    -   *關係模組：* 觸發「同理伴侶」提示詞（支持性、傾聽優先、高情商）。
    -   *自我成長模組：* 觸發「蘇格拉底導師」提示詞（反思、引導、混合語氣）。

### 2.3 隱私與安全 (信任層)
-   **PII 保險箱：** 將身份數據（姓名、出生時間）與畫像數據（特徵、標籤）進行嚴格的物理隔離。
-   **零信任多租戶：** 
    -   B2C 階段：獨立的加密金鑰。
    -   未來 B2B 階段：嚴格的租戶隔離（向量資料庫中的 Namespace 分離），確保員工數據對雇主不可見（反之亦然），僅在合適情況下分享聚合數據。

## 3. 市場進入策略 (Go-to-Market Strategy)："數據優先"
1.  **第一階段 (B2C - "超級應用")：** 專注於用戶留存與互動，以驗證 UMF 模型並收集行為互動數據（去識別化）。
2.  **第二階段 (數據成熟期)：** 利用第一階段的人類反饋強化學習 (RLHF) 優化「角色引擎」。
3.  **第三階段 (B2B - "HR-Tech 轉型")：** 將引擎授權給企業，用於團隊動力學、領導力教練與人才招募，利用經過驗證的高保真畫像能力。

## 4. 技術堆疊 (2026年環境)
-   **前端：** 跨平台 (Flutter/React Native)，具備即時語音功能。
-   **後端：** Python (FastAPI) + LangGraph (代理編排)。
-   **運算：** 基於 Rust 的命理函式庫，用於高效能排盤。
-   **資料庫：** 
    -   *關聯式：* PostgreSQL (用戶元數據、保險箱)。
    -   *向量式：* Pinecone / Weaviate (RAG 知識庫、租戶隔離)。
-   **AI 模型：** GPT-5 等級 (複雜推理) + 輕量級語言模型 (隱私/預處理)。

---

*本文件作為 Aetheria 專案的基礎架構藍圖。*
